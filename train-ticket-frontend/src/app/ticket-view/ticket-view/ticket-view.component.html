<!-- âœ… Toast Notification -->
<div *ngIf="showToast" class="toast-notification">
  ğŸ“‹ PNR copied to clipboard!
</div>

<!-- âœ… Ticket Container -->
<div class="ticket-container" id="ticketSummary">
  <h2>
    <span class="emoji">ğŸŸï¸</span>
    Ticket Summary
  </h2>

  <!-- âœ… PNR Number -->
  <div class="pnr-box">
    <span class="label">ğŸ†” PNR:</span>
    <span class="value"><strong>{{ pnrNumber }}</strong></span>
    <button class="copy-btn" (click)="copyPNR()">ğŸ“‹ Copy</button>
  </div>
  <p class="pnr-advice">ğŸ”’ Do not share your PNR with untrusted sources.</p>

  <!-- âœ… Booking Summary -->
  <div class="ticket-summary">
    <table>
      <tbody>
   <tr>
  <th>ğŸš† Train:</th>
  <td><strong>{{ bookingData.train?.trainName || 'N/A' }}</strong></td>
</tr>
<tr>
  <th>ğŸ›¤ï¸ From:</th>
  <td><strong>{{ bookingData.train?.source }}</strong> ({{ bookingData.train?.sourceCode }})</td>
</tr>
<tr>
  <th>ğŸ To:</th>
  <td><strong>{{ bookingData.train?.destination }}</strong> ({{ bookingData.train?.destinationCode }})</td>
</tr>
<tr>
  <th>ğŸ“… Date:</th>
  <td><strong>{{ bookingData?.date || 'N/A' }}</strong></td>
</tr>
<tr>
  <th>â± Duration:</th>
  <td><strong>{{ bookingData.train?.duration }}</strong></td>
</tr>
<tr>
  <th>ğŸ’° Total Fare:</th>
  <td><strong>â‚¹{{ bookingData.train?.fare }}</strong></td>
</tr>

      </tbody>
    </table>
  </div>

  <!-- âœ… Passengers Table -->
  <div *ngIf="bookingData?.passengers?.length">
    <h3 class="text-light mb-4">ğŸ‘¤ Passengers:</h3>
    <div class="passengers-table-wrapper">
      <table class="passengers-table">
        <thead>
          <tr>
            <th>Name</th>
            <th>Age</th>
            <th>Class</th>
            <th>Seat</th>
            <th>Status</th>
            <th>Fare</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let p of bookingData.passengers">
            <td data-label="ğŸ‘¤ Name"><strong>{{ p.name }}</strong></td>
            <td data-label="ğŸ‚ Age"><strong>{{ p.age }}</strong></td>

            <!-- âœ… Class + Icon -->
            <td data-label="ğŸšª Class">
              <strong>
                <ng-container [ngSwitch]="p.seatType">
                  <span *ngSwitchCase="'1A'">ğŸ›Œ 1A</span>
                  <span *ngSwitchCase="'2A'">ğŸ›ï¸ 2A</span>
                  <span *ngSwitchCase="'3A'">ğŸ›‹ï¸ 3A</span>
                  <span *ngSwitchCase="'SL'">ğŸš‰ SL</span>
                  <span *ngSwitchDefault>ğŸ’º 2S</span>
                </ng-container>
              </strong>
            </td>

            <!-- âœ… Seat with tooltip -->
            <td data-label="ğŸª‘ Seat">
              <strong>
                <ng-container [ngSwitch]="p.status">
                  <span *ngSwitchCase="'Confirmed'"
                        [attr.title]="'Coach: ' + p.seatNumber?.split('-')[0] + ', Seat No: ' + p.seatNumber?.split('-')[1]?.split(' ')[0] + ', Berth: ' + p.seatNumber?.split(' ')[1]">
                    {{ p.seatNumber }}
                  </span>
                  <span *ngSwitchCase="'RAC'"
                        [attr.title]="'RAC Number: ' + p.seatNumber?.replace('RAC', '')">
                    {{ p.seatNumber }}
                  </span>
                  <span *ngSwitchDefault
                        [attr.title]="'WL Number: ' + p.seatNumber?.replace('WL', '')">
                    {{ p.seatNumber || '-' }}
                  </span>
                </ng-container>
              </strong>
            </td>

            <!-- âœ… Status with colored badge -->
            <td data-label="Status">
              <span class="status-badge" [ngClass]="{
                confirmed: p.status === 'Confirmed',
                rac: p.status === 'RAC',
                waiting: p.status?.includes('WL')
              }">
                {{ p.status }}
              </span>
            </td>

            <td data-label="ğŸ’° Individual Fare(s)">
              <strong>â‚¹{{ p.fare }}</strong>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- âœ… QR Section -->
  <div class="qr-section">
    <img *ngIf="qrCodeDataURL" [src]="qrCodeDataURL" alt="QR Code" class="qr-image" />
  </div>

  <!-- âœ… Actions -->
  <div class="actions">
    <button (click)="goToTrainSearch()" class="nav-link btn btn-link p-0 m-0">ğŸš† Back to Train Search</button>
    <button (click)="downloadPDF()">ğŸ“„ Download PDF</button>
    <button (click)="shareTicket()">ğŸ“¤ Share Ticket</button>
  </div>
</div>
