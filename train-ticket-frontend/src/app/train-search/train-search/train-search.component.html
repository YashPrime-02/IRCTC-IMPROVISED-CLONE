<div class="page-container">
  <div class="form-box glass-card">
    <h2><i class="fas fa-train"></i> Search Your Train</h2>

    <!-- Input Fields -->
    <div class="form-group">
      <label for="source"><i class="fas fa-map-marker-alt"></i><strong> Source Station</strong></label>
      <select id="source" #sourceRef>
        <option value="">ðŸš‰ Choose source</option>
        <option *ngFor="let s of stations" [value]="s.stationCode">
          {{ s.stationName }} ({{ s.stationCode }})
        </option>
      </select>
    </div>

    <div class="form-group">
      <label for="destination"><i class="fas fa-map-marked-alt"></i><strong>Destination Station</strong></label>
      <select id="destination" #destinationRef>
        <option value="">ðŸš‰ Choose destination</option>
        <option *ngFor="let s of stations" [value]="s.stationCode">
          {{ s.stationName }} ({{ s.stationCode }})
        </option>
      </select>
    </div>

    <div class="form-group">
      <label for="journeyDate"><i class="fas fa-calendar-alt"></i> <strong>Date</strong></label>
      <input type="date" id="journeyDate" [(ngModel)]="selectedDate" />
    </div>

    <div class="form-group">
      <label for="journeyTime"><i class="fas fa-clock"></i> <strong>Time</strong></label>
      <input type="time" id="journeyTime" [(ngModel)]="selectedTime" />
    </div>

    <div class="form-group">
      <label for="numPeople"><i class="fas fa-users"></i> <strong>Number of People</strong></label>
      <select id="numPeople" [(ngModel)]="numberOfPeople">
        <option *ngFor="let n of peopleOptions" [value]="n">{{ n }}</option>
      </select>
    </div>

    <!-- Search Button -->
    <button (click)="onSearch(sourceRef.value, destinationRef.value)">
      <i class="fas fa-search"></i> Search Trains
    </button>

    <!-- Loader -->
    <div *ngIf="loading" class="loading-container">
      <i class="fas fa-spinner fa-spin loader-icon"></i>
      <div class="progress-bar"><div class="bar"></div></div>
    </div>
  </div>

  <!-- Results Modal -->
  <div class="modal-content" *ngIf="showModal && trains.length > 0">
    <!-- Cross Button -->
    <button class="close-cross-btn" (click)="closeModal()">Ã—</button>

    <div class="train-cards-container">
      <div class="train-card" *ngFor="let train of trains">
        <h3><i class="fas fa-train"></i> {{ train.trainName }}</h3>
        <p><i class="fas fa-clock"></i> {{ train.departureTime }} â†’ {{ train.arrivalTime }}</p>
        <p><i class="fas fa-hourglass-half"></i> Duration: {{ train.duration }}</p>
        <p><i class="fas fa-calendar-day"></i> Date: {{ selectedDate || 'N/A' }}</p>

        <button class="book-btn" (click)="bookTrain(train)">
          <i class="fas fa-ticket-alt"></i> Proceed to Book Ticket
        </button>
      </div>
    </div>
  </div>

  <!-- No Results Message -->
  <div *ngIf="searched && trains.length === 0" class="no-results glass-card">
    <p>ðŸš« No trains found for {{ selectedDate || 'this date' }}.</p>
  </div>
</div>
